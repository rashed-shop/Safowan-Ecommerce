const products = [
  { id: 1, name: "ржЬрж╛ржорж╛", category: "clothes", price: 500, image: "images/jama.jpg" },
  { id: 2, name: "ржкрзНржпрж╛ржирзНржЯ", category: "clothes", price: 650, image: "images/pant.jpg" },
  { id: 3, name: "ржЦрзЗрж▓ржирж╛ ржЯрзНрж░рзЗржи", category: "toys", price: 300, image: "images/train.jpg" },
  { id: 4, name: "ржЪрж┐ржХрж┐рзОрж╕рж╛ ржХрж┐ржЯ", category: "essentials", price: 800, image: "images/kit.jpg" },
  { id: 5, name: "ржмрж▓", category: "toys", price: 150, image: "images/ball.jpg" }
];

let cart = [];

function showProducts(filter = "") {
  const productList = document.getElementById("product-list");
  const searchQuery = document.getElementById("searchBox").value.toLowerCase();
  productList.innerHTML = "";

  const filtered = products.filter(p => {
    const matchCategory = filter ? p.category === filter : true;
    const matchSearch = p.name.toLowerCase().includes(searchQuery);
    return matchCategory && matchSearch;
  });

  filtered.forEach(product => {
    const div = document.createElement("div");
    div.className = "product";
    div.innerHTML = `
      <img src="${product.image}" alt="${product.name}">
      <h3>${product.name}</h3>
      <p>ржжрж╛ржо: ${product.price} ржЯрж╛ржХрж╛</p>
      <button onclick="addToCart(${product.id})">ЁЯЫТ Add to Cart</button>
    `;
    productList.appendChild(div);
  });
}

function addToCart(id) {
  const item = products.find(p => p.id === id);
  const found = cart.find(p => p.id === id);
  if (found) {
    found.qty += 1;
  } else {
    cart.push({ ...item, qty: 1 });
  }
  updateSummary();
}

function updateSummary() {
  const summary = document.getElementById("summary");
  let totalQty = 0;
  let totalPrice = 0;

  cart.forEach(p => {
    totalQty += p.qty;
    totalPrice += p.price * p.qty;
  });

  summary.innerHTML = `
    <p>ржорзЛржЯ ржкржгрзНржп: ${totalQty}ржЯрж┐</p>
    <p>ржорзЛржЯ ржжрж╛ржо: ${totalPrice} ржЯрж╛ржХрж╛</p>
    <button onclick="placeOrder()">ЁЯУж ржЕрж░рзНржбрж╛рж░ ржХрж░рзБржи</button>
  `;
}

function placeOrder() {
  if (cart.length === 0) {
    alert("ржЕрж░рзНржбрж╛рж░ ржХрж░рж╛рж░ ржЬржирзНржп ржХржоржкржХрзНрж╖рзЗ ржПржХржЯрж┐ ржкржгрзНржп ржпрзЛржЧ ржХрж░рзБржи!");
    return;
  }

  alert("ржЕрж░рзНржбрж╛рж░ ржЧрзНрж░рж╣ржг ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред ржзржирзНржпржмрж╛ржж!");
  cart = [];
  updateSummary();
}

document.getElementById("searchBox").addEventListener("input", () => showProducts());
window.onload = () => showProducts();
